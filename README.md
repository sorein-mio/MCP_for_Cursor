# MCP for Cursor

このリポジトリは、Cursor 用の MCP サーバーを導入および管理するためのツールとスクリプトをまとめたものです。

---

## 構成内容

- **セットアップスクリプト (Windows 環境)**
  - **setup-mcp-servers.ps1**  
    Windows 環境向けの PowerShell スクリプトです。MCP サーバーの各種セットアップを自動で実施します。
  - **setup-all-mcp-servers.ps1**  
    すべての MCP サーバーを一括でセットアップするための PowerShell スクリプトです。
  - **setup-typescript-servers.ps1**  
    TypeScript を利用するサーバーのセットアップ用スクリプトです（対象サーバーがある場合）。

- **MCP サーバーのソースコード**
  - `mcp-repos/` 以下に、各 MCP サーバー（例: docker-mcp、mcp-text-editor）のソースコードが配置されています。

---

## Windows 環境でのセットアップ手順

1. **セットアップスクリプトの実行**  
   Windows ユーザーは PowerShell で `setup-mcp-servers.ps1` または `setup-all-mcp-servers.ps1` を実行してください。  
   これらのスクリプトは、必要な依存関係のインストール、各 MCP サーバーのビルド、設定を自動的に行います。

2. **詳細およびトラブルシューティング**  
   - スクリプトの実行結果やエラーは、各スクリプト内のログファイルや画面出力で確認できます。
   - Windows 環境でのインストール方法に関しては、個別のスクリプトファイル内にコメントで詳しく記載しています。

---

## WSL (Windows Subsystem for Linux) 環境でのセットアップ（追記）

本来の内容は Windows 環境向けですが、WSL 環境向けの設定も下記の通り追記しました。WSL ユーザーは以下の手順に従ってください。

### セットアップスクリプト (WSL)

- **setup-mcp-servers-wsl.sh**  
  WSL 環境向けの Bash スクリプトです。このスクリプトは以下の処理を行います:
  - **WSL 環境の検出**  
    スクリプト開始時に、現在の環境が WSL であるかを確認します。
  - **apt リポジトリの更新と依存関係のインストール**  
    apt を使用してリポジトリの更新を行い、Node.js および Python3 のインストール状況を確認します。足りない場合は自動的にインストールを試みます。
  - **MCP サーバーのセットアップ**  
    指定された MCP サーバー（例: docker-mcp、mcp-text-editor）のディレクトリ内で、各種ビルドおよびセットアップ処理（npm install や pip install 等）を実行します。
  - **Python バージョンのアップグレード (オプション)**  
    mcp-text-editor など、一部のサーバーでは Python 3.13 以上が必要です。  
    オプション `--upgrade-python` を指定して実行すると、pyenv を使用してユーザーレベルで Python のアップグレード（例：3.13.0 のインストール）が試みられます。

### 実行方法

1. **基本的なセットアップ**  
   WSL 環境で次のコマンドを実行してください:
   ```
   bash setup-mcp-servers-wsl.sh
   ```
   この実行により、WSL 環境での MCP サーバーのセットアップが順次実行され、出力は `output.log` に記録されます。

2. **Python のアップグレード (必要に応じて)**  
   mcp-text-editor のセットアップで Python バージョンが不足している場合、以下のコマンドで Python のアップグレードが可能です:
   ```
   bash setup-mcp-servers-wsl.sh --upgrade-python
   ```
   このオプションは、pyenv を自動でインストール・設定し、指定されたバージョン（例: 3.13.0）の Python をインストールしてから、グローバル環境に設定します。  
   ※ pyenv 使用時には、シェルの初期化ファイルへの設定追加が必要な場合があります。詳細はスクリプト内のコメントを参照してください。

---

## ログとトラブルシューティング

- **ログ:**  
  WSL 用セットアップスクリプトの出力は、直下の `output.log` に全て記録されます。  
  エラーや警告が表示された場合は、このログファイルを確認して対処してください。

- **よくある問題:**  
  - **Python 拡張モジュールの不足:**  
    pyenv で Python をビルドする際、`bz2`、`ctypes`、`tkinter`、`lzma` などのモジュールが欠落する場合、必要なライブラリ（例: libbz2、libffi、Tk、xz-utils など）が不足している可能性があります。
  - **PATH 関連の警告:**  
    ローカルインストールされたプログラム（例: docker-mcp 等）の実行ファイルパス（~/.local/bin）が PATH に含まれていない場合、警告が表示されることがあります。必要に応じて PATH を修正してください。

---

## まとめ

このリポジトリは、Windows および WSL 環境の双方で MCP サーバーをセットアップするためのツールとスクリプトを提供しています。既存の Windows 向けの内容はそのまま維持し、WSL 環境向けの追加情報を追記しています。各環境に合わせた適切なスクリプトを実行し、詳細なログを参照することで、スムーズなセットアップが可能となります。

Happy Coding!
